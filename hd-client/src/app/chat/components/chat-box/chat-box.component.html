<div class="chat-box__container">
    <p-panel>
        <ng-template pTemplate="header">
            <ng-container *ngIf="userType === 'employee'; else headerCustomerTemplate">
                <app-chat-box-header-employee 
                    class="width-100" 
                    [room]="room"
                    [(editRoomDialogEmployeeVisibility)]="editRoomDialogEmployeeVisibility"
                    [(transferRoomDialogEmployeeVisibility)]="transferRoomDialogEmployeeVisibility"
                    [(closeRoomDialogEmployeeVisibility)]="closeRoomDialogEmployeeVisibility"
                />
            </ng-container>
            <ng-template #headerCustomerTemplate>
                <app-chat-box-header-customer 
                    [room]="room"
                    class="width-100" 
                />
            </ng-template>
        </ng-template>
        <div class="messages__wrapper">
            <p-scrollPanel #sc [style]="{ width: '100%', height: '24.5rem' }">
                <div *ngFor="let m of room.messages">
                    <app-message-scroll-panel [message]="m" />
                </div>
            </p-scrollPanel>
        </div>
        <ng-template pTemplate="footer">
            <ng-container *ngIf="userType === 'employee'; else footerCustomerTemplate">
                <app-chat-box-footer-employee 
                    [room]="room"
                    (onOpenImageUploadDialog)="onOpenImageUploadDialog()"
                    (onOpenVideoUploadDialog)="onOpenVideoUploadDialog()"
                    (onOpenFileUploadDialog)="onOpenFileUploadDialog()"
                    (onSendTextMessage)="onSendTextMessage($event)"
                    (onEnterRoom)="onEnterRoom($event)"
                    (onTranferRoom)="onOpenTransferRoomDialog()"
                /> 
            </ng-container>
            <ng-template #footerCustomerTemplate>
                <app-chat-box-footer-customer 
                    [room]="room"
                    (onOpenImageUploadDialog)="onOpenImageUploadDialog()"
                    (onOpenVideoUploadDialog)="onOpenVideoUploadDialog()"
                    (onOpenFileUploadDialog)="onOpenFileUploadDialog()"
                    (onSendTextMessage)="onSendTextMessage($event)"
                />
            </ng-template>
            
        </ng-template>
    </p-panel>    
</div>

<p-confirmDialog />

<app-upload-file-dialog 
    [(dialogVisibility)]="uploadDialogVisibility" 
    [htmlAccept]="htmlAccept" 
    (imagesToUploadEmmit)="onSendImages($event)" 
    (videosToUploadEmmit)="onSendVideos($event)"
    (filesToUploadEmmit)="onSendFiles($event)"
/>

<app-edit-room-dialog 
    [(dialogVisibility)]="editRoomDialogEmployeeVisibility"
    (OnEditRoomEmitt)="onEditRoom($event)"
    [room]="room"
/>

<app-transfer-room-dialog
    [(dialogVisibility)]="transferRoomDialogEmployeeVisibility"
    (onTransferRoomEmitt)="onTransferRoom($event)"
    [room]="room"
/>

<app-close-room-dialog
    [(dialogVisibility)]="closeRoomDialogEmployeeVisibility"
    (onCloseRoomEmitt)="onCloseRoom($event)"
    [room]="room"
/>
