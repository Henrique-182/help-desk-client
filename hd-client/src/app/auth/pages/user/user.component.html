<div class="user-container">
  <div class="user-container__toolbar">
    <mat-toolbar color="primary">
      <button mat-icon-button (click)="onMenuClick()">
        <mat-icon>menu</mat-icon>
      </button>
      <span>Lista de Usuários</span>
      <span class="example-spacer"></span>
      <span>Olá, {{ username }}</span>
    </mat-toolbar>
  </div>

  <div class="user-container__table">
    <p-table [value]="tableValue" 
      [lazy]="true" 
      [rows]="rows" 
      [totalRecords]="totalElements"
      paginator="true" 
      [showCurrentPageReport]="true" 
      currentPageReportTemplate="{first} - {last} de um total de {totalRecords} usuários"
      (onPage)="handlePageEvent($event)" 
      [rowsPerPageOptions]="[5, 10, 25, 50]"
      [sortField]="'id'"
      (onSort)="handleSortEvent($event)"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="id">
            Id <p-sortIcon field="id" />
          </th>
          <th pSortableColumn="username">
            Nome de usuário <p-sortIcon field="username" />
          </th>
          <th pSortableColumn="fullname">
            Nome Completo <p-sortIcon field="fullname" />
          </th>
          <th>
            Ativo
          </th>
          <th>
            Ações
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>{{ user.key }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.fullname }}</td>
          <td>{{ user.enabled | booleanToYn }}</td>
          <td>
            <p-button 
              pRipple
              icon="pi pi-info-circle" 
              [rounded]="true" 
              [outlined]="true" 
              severity="info" 
              (click)="onGetUser(user)" />
            <p-button 
              pRipple
              icon="pi pi-pencil" 
              [rounded]="true" 
              [outlined]="true" 
              severity="success" 
              (click)="onEditUser(user)" />
            <p-button 
              pRipple 
              icon="pi pi-trash" 
              severity="danger" 
              [rounded]="true" 
              [outlined]="true" 
              [hidden]="username === user.username"
              (click)="onDeleteUser(user)" />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>